***** LINUX NOTES *********

1) ls
2) ls -al --> shows hidden files also with long listing

#Listing Files by type
ls -F, ls -lF (with Long listing)
#output ->  / -> directory, @ -> Link and * -> executable


#Listing files by time and in reverse
ls -t -> List files by time
ls -r -> List files in reverse order
ls -latr -> long listing including all files reverse sorted by time

#Listing Files receursively
ls -R -> displays contents of any dir/sub-dir below that

#TREE
tree -d -> List directories only
tree -C -> Colorize output

ls -d -> List directory Name not contents
ls --color --> Colorize the output

#WANT To see Recursive output
ls -R

#Working with Spaces in Files
Use "\" to escape empty character
Encapsulate Entire file-name in Quotes

drwxr-xr-x+ 47 mursrira  staff     1504 Aug  4 08:58 ..
drwxr-xr-x   2 mursrira  staff       64 Aug  4 08:59 my notes
drwx------+ 49 mursrira  staff     1568 Aug  4 08:59 .
~/Documents

~/Documents
$ ls my\ notes
hello.py
~/Documents
$ ls "my notes"
hello.py
~/Documents

#HOW to search Contents of File, what pipes are and how to use them
grep - <display lines matching a pattern>
#TYPICAL Format

grep <search-pattern> <File-Name>

options can be used in grep

-i -> Perform search, ignore case
-c -> Count the number of occurances in a file
-n -> will preceed output with Line numbers
-v -> Print the lines that do not matching

#know type of file

file <file-name>

#searching for text in Binary files
strings -> Display printable strings in binary file

#PIPE
PIPE Symbol -> |

<command-output> | <command-input>

##example
cat <file-name> | grep <search-pattern>
~/Documents
$ cat secret | grep -in ".com"
2:site : facebook.com

#The Cut Command

cut <file> . -> Cut out selected portions of the file , if file is omitted use standard input

-d -> use delimeter as field seperator
-f N -> dislay nth field

grep bob /etc/passwd | cut -d: -f1,5 | sort | tr ":" "" | column t

#PIPING output to a pager

more,less

using less u can scroll through full page

#
~/Documents
$ grep -in "bb" norm.txt | less

#OUTPUT
17:bbb
22:bbb
27:bbb
33:bbbb
36:bbbbbb
(END)

~/Documents
$ grep -in "bb" norm.txt | more
17:bbb
22:bbb
27:bbb
33:bbbb
36:bbbbbb

#WILDCARDS
character or string used for pattern matching

* -> matches 0 or more characters
*.txt
a*.txt
a*

? -> matches exactly one character
?.txt
a?
a?.txt

[] - A character class
Match any of the characters included between the brackets/match exactly one character
[aeiou]

#ca[nt]*
matches files - can,cat,candy,catch

#[!] - Match any of the characters not included between the brackets.match exactly one character
#[!aeiou]*
matches files - baseball,cricket

#MORE Wild card Ranges

[a-g]*
[3-8]*

#NAMED CHARACTER CLASS

[[:aplha:]], [[:alnum:]],[[:digit:]],[[:lower:]],[[:space:]],[[:upper:]]

#ESCAPE character

#"\" --> Use it if you want to match wild card character
#MATCH all files that end with ?
-> *\?

#ENVIORNMENT VARIABLES

$ printenv PATH
/Library/Frameworks/Python.framework/Versions/3.7/bin:/Users/mursrira/bin:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
~/Desktop

#CREATING Environment Variables
Syntax:
export VAR="variable"
export TZ="US/Pacific"

#REMOVING Environment Variables
Syntax:
unset TZ
unset VAR

#Persisting environment Variables
Add to bash_profile

$cat ~/.bash_profile
export TZ="US/Pacific"
export PATH=${PATH}:/usr/java/jdk1.5.0_07/bin

export PATH="$PATH:/home/tomahawk/tools/jdk1.8.0_92/bin"

#File system

### df -h --> displays disk partitions in human readable format! gives assosiation of Filesystem to Mounted to directory in VM..

[wae@wae-collector ~]$ df -h
Filesystem           Size  Used Avail Use% Mounted on
/dev/mapper/cl-root   40G  4.5G   36G  12% /
devtmpfs              24G     0   24G   0% /dev
tmpfs                 24G     0   24G   0% /dev/shm
tmpfs                 24G   20M   24G   1% /run
tmpfs                 24G     0   24G   0% /sys/fs/cgroup
/dev/mapper/vg1-opt  500G  162G  339G  33% /opt
/dev/sda1           1014M  220M  795M  22% /boot
tmpfs                4.8G     0  4.8G   0% /run/user/1005
[wae@wae-collector ~]$


#fdisk
[root@wae-collector viskakka]# fdisk -l

Disk /dev/sdb: 536.9 GB, 536870912000 bytes, 1048576000 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x83aec296

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048  1048575999   524286976   8e  Linux LVM

Disk /dev/sda: 107.4 GB, 107374182400 bytes, 209715200 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x000b869e

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048     2099199     1048576   83  Linux
/dev/sda2         2099200   209715199   103808000   8e  Linux LVM

Disk /dev/mapper/cl-root: 42.9 GB, 42949672960 bytes, 83886080 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mapper/cl-swap: 10.7 GB, 10737418240 bytes, 20971520 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mapper/vg1-opt: 536.9 GB, 536866717696 bytes, 1048567808 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mapper/cl-opt: 52.6 GB, 52609155072 bytes, 102752256 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


#NETSTAT 

#netstat shows how traffic is leaving and coming in the machine..

[root@wae-7-1-1-etisalat network-scripts]# netstat -rnv
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
0.0.0.0         10.105.217.1    0.0.0.0         UG        0 0          0 ens160
10.105.217.0    0.0.0.0         255.255.255.0   U         0 0          0 ens160
172.16.1.0      0.0.0.0         255.255.255.0   U         0 0          0 tap0
172.16.2.0      172.16.1.250    255.255.255.0   UG        0 0          0 tap0
192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 virbr0
[root@wae-7-1-1-etisalat network-scripts]#

#For example if destination is 172.16.1.x x->1to255 traffic will flow through "tap0" interface via Gateway 172.16.1.0

#TCPDUMP
cmd - tcpdump -i <interface-name>
# Command traces every single transaction leaving/coming in to machine on the interface...

[root@wae-7-1-1-etisalat network-scripts]# tcpdump -i tap0
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on tap0, link-type EN10MB (Ethernet), capture size 262144 bytes
06:36:07.427106 IP 10.105.217.3.hsrp > all-routers.mcast.net.hsrp: HSRPv0-hello 20: state=active group=1 addr=gateway
06:36:07.526301 IP 10.105.217.58.hsrp > 224.0.0.102.hsrp: HSRPv1
06:36:07.598467 IP 172.16.1.61.ldp > all-routers.mcast.net.ldp: LDP, Label-Space-ID: 172.16.1.61:0, pdu-length: 30
06:36:07.734303 ARP, Request who-has 10.105.217.98 tell 10.105.217.81, length 46
06:36:07.880181 IP 10.105.217.59.hsrp > 224.0.0.102.hsrp: HSRPv1
06:36:08.481790 ARP, Request who-has 10.105.217.98 tell 10.105.217.81, length 46
06:36:08.794517 STP 802.1d, Config, Flags [none], bridge-id 806d.00:64:40:4d:76:80.800e, length 43
06:36:08.877499 IP 172.16.1.64.ldp > all-routers.mcast.net.ldp: LDP, Label-Space-ID: 172.16.1.64:0, pdu-length: 30

##BRING UP or BRING Down Interface...

#BRING UP interface...
[root@wae-7-1-1-etisalat network-scripts]# ifup ens160

#BRING down interface...
[root@wae-7-1-1-etisalat network-scripts]# ifdown ens160

#NIC -> Network interface Card..

[root@wae-7-1-1-etisalat network-scripts]# ethtool virbr0
Settings for virbr0:
	Link detected: no
[root@wae-7-1-1-etisalat network-scripts]# ethtool tap0
Settings for tap0:
	Supported ports: [ ]
	Supported link modes:   Not reported
	Supported pause frame use: No
	Supports auto-negotiation: No
	Supported FEC modes: Not reported
	Advertised link modes:  Not reported
	Advertised pause frame use: No
	Advertised auto-negotiation: No
	Advertised FEC modes: Not reported
	Speed: 10Mb/s
	Duplex: Full
	Port: Twisted Pair
	PHYAD: 0
	Transceiver: internal
	Auto-negotiation: off
	MDI-X: Unknown
	Current message level: 0xffffffa1 (-95)
			       drv ifup tx_err tx_queued intr tx_done rx_status pktdata hw wol 0xffff8000
	Link detected: yes
[root@wae-7-1-1-etisalat network-scripts]# ethtool lo
Settings for lo:
	Link detected: yes
[root@wae-7-1-1-etisalat network-scripts]# ethtool ens160
Settings for ens160:
	Supported ports: [ TP ]
	Supported link modes:   1000baseT/Full
	                        10000baseT/Full
	Supported pause frame use: No
	Supports auto-negotiation: No
	Supported FEC modes: Not reported
	Advertised link modes:  Not reported
	Advertised pause frame use: No
	Advertised auto-negotiation: No
	Advertised FEC modes: Not reported
	Speed: 10000Mb/s
	Duplex: Full
	Port: Twisted Pair
	PHYAD: 0
	Transceiver: internal
	Auto-negotiation: off
	MDI-X: Unknown
	Supports Wake-on: uag
	Wake-on: d
	Link detected: yes
[root@wae-7-1-1-etisalat network-sc



## SECTION - 5 

#
# SED command VERY Powerful :)
#

#VIM -practise => http://vimgenius.com/lessons/vim-intro/levels/level-1

# sed command

replace a string in a file with new string.
Find and delete a line.
Remove empty lines.. etc are uses...

#usage sed command=>

sed 's/Kenny/Lenny/g' sienfeld-characters => replaces all Kenny with Lenny in sienfeld-characters file... only in screen :)
sed -i 's/Kenny/Lenny/g' sienfeld-characters => replaces all Kenny with Lenny in sienfeld-characters file... in exiting file.. :)

#To remove
sed -i 's/Kenny//g' sienfeld-characters

#To delete lines
sed -i 's/Kenny/d' sienfeld-characters => delete all lines where Kenny is present

#How to remove empty lines in file
sed -i 's/^$/d' sienfeld-characters => anything empty line will get deleted..

#Remove nth line and affect existing line
sed -i 'nd' sienfeld-characters

#Remove n,n+1th line and affect existing line
sed -i 'n,n+1d' sienfeld-characters

#Replace TAB with Space
sed -i 's/\t/ /g' sienfeld-characters

#Display only lines requested (displays only lines btw 12 to 18) #p => put
sed -n 12,18p sienfeld-characters

#Display all lines excpet btw requested (displays all lines expcept 12 to 18) #d => delete
sed 12,18d sienfeld-characters

#Empty line after each character..
sed G sienfeld-characters

#change all(Kenny to Lenny) except..line 8 => in linux CLI
sed -i '8!s/Kenny/Lenny/g' sienfeld-characters


#change in VI Editor
#in ESC Mode
:%s/Sienfeld/Peter/g


#SEC 5 => LEC 79
#User Account Management
Commands
1. useradd => create a new user
2. groupadd => create a new group
3. userdel => delete a user
4. groupdel => delete a group
5. usermod => modify a user

#when ever we create a new user those user record is maintained in 3 different files..

1. /etc/passwd
2. /etc/group
3. /etc/shadow


[root@wae-7-1-1-etisalat home]# ls -lrt
total 4
drwx------.  3 wae       wae         78 Apr 11  2018 mursrira
drwx------. 28 wae       wae       4096 Nov 19 14:00 wae
drwx------   3 spiderman spiderman   78 Nov 19 15:25 spiderman
[root@wae-7-1-1-etisalat home]# chgrp -R superheros spiderman
[root@wae-7-1-1-etisalat home]# ls -lrt
total 4
drwx------.  3 wae       wae          78 Apr 11  2018 mursrira
drwx------. 28 wae       wae        4096 Nov 19 14:00 wae
drwx------   3 spiderman superheros   78 Nov 19 15:25 spiderman
[root@wae-7-1-1-etisalat home]#


[root@wae-7-1-1-etisalat home]# cat /etc/passwd | tail -n 1
spiderman:x:1002:1005::/home/spiderman:/bin/bash
[root@wae-7-1-1-etisalat home]#

#<user-name>:<passowrd>:<user-id>:<grp-id>:<DESCRIPTION>::<HOME-DIR>:/bin/bash

[root@wae-7-1-1-etisalat home]# cat /etc/group | tail -n 2
superheros:x:1004:spiderman
spiderman:x:1005:
[root@wae-7-1-1-etisalat home]#
#<group-name>:<password>:<group-id>:<user-belongs-to-group>

#SHADOW file is for passwords of users created..
[root@wae-7-1-1-etisalat home]# cat /etc/shadow | tail -n 2
apache:!!:18184::::::
spiderman:!!:18219:0:99999:7:::
[root@wae-7-1-1-etisalat home]#

#0:99999 => password validity dates..
#abv no encrypted password for spiderman as we did not set it...

#Example #corporate World
useradd -g superheros -s /bin/bash -c "user description" -m -d /home/spiderman spiderman


###
[root@wae-7-1-1-etisalat home]# cat /etc/passwd | tail -n 2
apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin
ironman:x:1002:1004:Ironman Character:/home/ironman:/bin/bash
[root@wae-7-1-1-etisalat home]#
[root@wae-7-1-1-etisalat home]# cat /etc/group | tail -n 2
apache:x:48:
superheros:x:1004:
[root@wae-7-1-1-etisalat home]# cat /etc/shadow | tail -n 2
apache:!!:18184::::::
ironman:!!:18219:0:99999:7:::
[root@wae-7-1-1-etisalat home]# id ironman
uid=1002(ironman) gid=1004(superheros) groups=1004(superheros)
[root@wae-7-1-1-etisalat home]#

#PUT password

[root@wae-7-1-1-etisalat home]# passwd ironman
Changing password for user ironman.
New password:
BAD PASSWORD: The password is shorter than 7 characters
Retype new password:
passwd: all authentication tokens updated successfully.
[root@wae-7-1-1-etisalat home]#
[root@wae-7-1-1-etisalat home]# cat /etc/shadow | tail -n 2
apache:!!:18184::::::
ironman:$6$4qmsUbpV$vnDX83vhVkAalQ44lKpDf85liB5E3YLuQzuCThGpEgluAo5N/EP6AouHdloFN7M5lwE65b2l0hRmeCqkRxguK0:18219:0:99999:7:::
[root@wae-7-1-1-etisalat home]#

####

#SEC 5 => LEC 80
Switch Users and Sudo Access to Users

1. su - <username> => u can change to any user u want..
2. sudo command => if no root previleges.. use sudo..
3. visudo => edits /etc/sudoers => configuration file which is used to add or remove rights for users 

=> /etc => is a directory in linux where all configuration files are stored...!!!

# ens160 => primary interface used to communicate with computers
# lo => Loopback interface
# virbr0 => private communication
# tap0 => openvpn interface
[root@wae-7-1-1-etisalat home]# ifconfig
ens160: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.105.217.74  netmask 255.255.255.0  broadcast 10.105.217.255
        inet6 fe80::ad2a:f1c8:2c0a:f891  prefixlen 64  scopeid 0x20<link>
        ether 00:50:56:81:51:62  txqueuelen 1000  (Ethernet)
        RX packets 24818897  bytes 4891822314 (4.5 GiB)
        RX errors 0  dropped 1618  overruns 0  frame 0
        TX packets 16624370  bytes 1739472269 (1.6 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 1764333756  bytes 155360521625 (144.6 GiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 1764333756  bytes 155360521625 (144.6 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

tap0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 172.21.41.20  netmask 255.255.255.0  broadcast 172.21.41.255
        inet6 fe80::2cd3:a8ff:fef8:e18d  prefixlen 64  scopeid 0x20<link>
        ether 2e:d3:a8:f8:e1:8d  txqueuelen 100  (Ethernet)
        RX packets 11712  bytes 2917384 (2.7 MiB)
        RX errors 0  dropped 822  overruns 0  frame 0
        TX packets 26  bytes 4202 (4.1 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

virbr0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255
        ether 52:54:00:c3:38:aa  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

[root@wae-7-1-1-etisalat home]#

[root@wae-7-1-1-etisalat home]# su - wae
Last login: Tue Nov 19 14:07:41 IST 2019 from 10.65.80.42 on pts/5
[wae@wae-7-1-1-etisalat ~]$

[wae@wae-7-1-1-etisalat ~]$ su - root
Password:
Last login: Tue Nov 19 14:00:16 IST 2019 on pts/4
Last failed login: Sat Dec 21 05:01:07 IST 2019 from 10.48.69.113 on ssh:notty
There was 1 failed login attempt since the last successful login.
ABRT has detected 1 problem(s). For more info run: abrt-cli list --since 1574152216
[root@wae-7-1-1-etisalat ~]#

#Assigning user sudo previliges =>
https://cisco.udemy.com/course/complete-linux-training-course-to-get-your-dream-it-job/learn/lecture/9167834#overview

1. vi /etc/sudoers
2. look for group wheel(it is by default added to this file..)

[root@wae-7-1-1-etisalat home]# grep "wheel" /etc/group
wheel:x:10:
[root@wae-7-1-1-etisalat home]# usermod -aG wheel wae
[root@wae-7-1-1-etisalat home]#
[root@wae-7-1-1-etisalat home]#
[root@wae-7-1-1-etisalat home]# grep "wheel" /etc/group
wheel:x:10:wae
[root@wae-7-1-1-etisalat home]#

#Adding to wheel group wae user.. it will get sudo rights :)
#permission denied..
[wae@wae-7-1-1-etisalat ~]$ dmidecode
# dmidecode 3.0
/sys/firmware/dmi/tables/smbios_entry_point: Permission denied
Scanning /dev/mem for entry point.
/dev/mem: Permission denied

#NOW it works... on using sudo
[wae@wae-7-1-1-etisalat ~]$ sudo dmidecode
# dmidecode 3.0
Getting SMBIOS data from sysfs.
SMBIOS 2.4 present.
364 structures occupying 16982 bytes.
Table at 0x000E0010.

Handle 0x0000, DMI type 0, 24 bytes
BIOS Information
	Vendor: Phoenix Technologies LTD
	Version: 6.00
	Release Date: 07/30/2013
	Address: 0xEA050

## OTHER Command with/without sudo
[wae@wae-7-1-1-etisalat ~]$ sudo fdisk -l

Disk /dev/sda: 107.4 GB, 107374182400 bytes, 209715200 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x0003630d

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048     2099199     1048576   83  Linux
/dev/sda2         2099200   209715199   103808000   8e  Linux LVM

Disk /dev/mapper/centos_wae--7--1--1--etisalat-root: 53.7 GB, 53687091200 bytes, 104857600 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mapper/centos_wae--7--1--1--etisalat-swap: 10.7 GB, 10737418240 bytes, 20971520 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mapper/centos_wae--7--1--1--etisalat-home: 41.9 GB, 41871736832 bytes, 81780736 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes

[wae@wae-7-1-1-etisalat ~]$ fdisk -l
fdisk: cannot open /dev/fd0: Permission denied
fdisk: cannot open /dev/sda: Permission denied
fdisk: cannot open /dev/mapper/centos_wae--7--1--1--etisalat-root: Permission denied
fdisk: cannot open /dev/mapper/centos_wae--7--1--1--etisalat-swap: Permission denied
fdisk: cannot open /dev/mapper/centos_wae--7--1--1--etisalat-home: Permission denied
[wae@wae-7-1-1-etisalat ~]$


#SEC 5 => Lec 81
#Monitor Users
1. who
2. last
3. w
4. finger
5. id

we have created them..so we need to managethem..

1) who => how many people are looged in and userid and terminal id and time which they have logged in..
#we use this command when there is high load in the system.. we want to see how many ppl are logged into system..

[root@wae-7-1-1-etisalat ~]# who
wae      :0           Oct 17 13:19 (:0)
wae      pts/0        Oct 17 13:19 (:0)
wae      pts/1        Oct 17 13:20 (:0)
root     pts/2        Nov 19 16:24 (dhcp-173-39-64-55.cisco.com)
##AFTER opening one more session with superman.. below new session had come :)
[root@wae-7-1-1-etisalat ~]# who
wae      :0           Oct 17 13:19 (:0)
wae      pts/0        Oct 17 13:19 (:0)
wae      pts/1        Oct 17 13:20 (:0)
root     pts/2        Nov 19 16:24 (dhcp-173-39-64-55.cisco.com)
superman pts/4        Nov 19 16:28 (dhcp-173-39-64-55.cisco.com)
[root@wae-7-1-1-etisalat ~]#

2) last => Tells u all the details of the every user logged in since the day 1 => it tells who is still logged in and who rebooted system..etc..

[root@wae-7-1-1-etisalat ~]# last | more
superman pts/4        dhcp-173-39-64-5 Tue Nov 19 16:28   still logged in
superman pts/4        dhcp-173-39-64-5 Tue Nov 19 16:28 - 16:28  (00:00)
wae      pts/4        dhcp-173-39-64-5 Tue Nov 19 16:25 - 16:27  (00:02)
root     pts/2        dhcp-173-39-64-5 Tue Nov 19 16:24   still logged in

wae      pts/0        173.39.25.100    Thu Jul  4 18:11 - 18:12  (00:01)
reboot   system boot  3.10.0-862.9.1.e Thu Jul  4 18:03 - 00:15 (-441+-17:-4
wae      pts/3        173.39.25.100    Thu Jul  4 17:57 - crash  (00:05)

#it prints only first column..
[root@wae-7-1-1-etisalat ~]# last | awk '{print $1}' | tail -n 5
root
root
reboot

wtmp

# u want to know only unique users logged in :) => uniq
[root@wae-7-1-1-etisalat ~]# last | awk '{print $1}' | sort | uniq

reboot
root
superman
wae
wtmp
[root@wae-7-1-1-etisalat ~]#

3) w => works as who but it gives little more information...details

[root@wae-7-1-1-etisalat ~]# w
 16:39:46 up 33 days,  3:22,  6 users,  load average: 0.90, 0.67, 0.37
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
wae      :0       :0               17Oct19 ?xdm?  12days  0.70s /usr/libexec/gnome-session-binary --session gnome-classic
wae      pts/0    :0               17Oct19 33days  5:26   5:26  ping 10.105.217.1
wae      pts/1    :0               17Oct19 33days  0.07s  0.07s bash
root     pts/2    dhcp-173-39-64-5 16:24    2.00s  0.14s  0.01s w
superman pts/4    dhcp-173-39-64-5 16:28   11:11   0.05s  0.05s -bash
wae      pts/5    10.65.80.42      16:39   34.00s  0.06s  0.06s -bash
[root@wae-7-1-1-etisalat ~]#

4) finger => should be added newly.. does not come with the system..it is a program very powerful program..=> does trace of user where is it coming from and 
what kind of protocol it is using..
you can install by => "yum install finger -y"

5) id => gives information..regd what groups u belong..etc..
[superman@wae-7-1-1-etisalat ~]$ id
uid=1002(superman) gid=1004(superheros) groups=1004(superheros),10(wheel)
[superman@wae-7-1-1-etisalat ~]$

#82 Sec-5 #Talking to users

1. users
2. wall
3. write

[superman@wae-7-1-1-etisalat ~]$ whoami
superman
1) displays all ative users..
[superman@wae-7-1-1-etisalat ~]$ users
root superman wae wae wae wae
[superman@wae-7-1-1-etisalat ~]$

2) wall u can communicate to other users.. to logoff or something... 

something like -> and presse ctrl + D for broadcast..
[superman@wae-7-1-1-etisalat ~]$ wall


please log off as i m rebooting machine.. thanks

-Murali

Broadcast message from superman@wae-7-1-1-etisalat (pts/4) (Tue Nov 19 17:37:54 2019):



please log off as i m rebooting machine.. thanks
[superman@wae-7-1-1-etisalat ~]$

#boroadcasted to root user..

[root@wae-7-1-1-etisalat ~]#
Broadcast message from superman@wae-7-1-1-etisalat (pts/4) (Tue Nov 19 17:37:54 2019):



please log off as i m rebooting machine.. thanks

-Murali

3) instead of broadcast send to only one user :)

[root@wae-7-1-1-etisalat ~]# write superman
Hello Superman!!  #and ctrl+d
[root@wae-7-1-1-etisalat ~]#

[superman@wae-7-1-1-etisalat ~]$
Message from root@wae-7-1-1-etisalat on pts/2 at 17:41 ...
Hello Superman!!
EOF


# lec- 85 ;Sec 5
#System Utility commmands =>

1) date
2) uptime
3) hostname
4) uname
5) which => every command is a file.. :) so you can run which to see where the file belongs
6) cal
7) bc => binary caluclators

[superman@wae-7-1-1-etisalat ~]$ date
Tue Nov 19 17:52:36 IST 2019
[superman@wae-7-1-1-etisalat ~]$ uptime #says about uptime and number of users logged in system..
 17:53:26 up 33 days,  4:35,  5 users,  load average: 0.09, 0.10, 0.13
[superman@wae-7-1-1-etisalat ~]$ hostname
wae-7-1-1-etisalat
[superman@wae-7-1-1-etisalat ~]$ uname -a #Also tells when VM was built..
Linux wae-7-1-1-etisalat 3.10.0-862.9.1.el7.x86_64 #1 SMP Mon Jul 16 16:29:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
[superman@wae-7-1-1-etisalat ~]$ which pwd
/usr/bin/pwd

#to see how may files present in dir..

6)
[superman@wae-7-1-1-etisalat ~]$ ls -l /usr/bin | wc -l
2141
[superman@wae-7-1-1-etisalat ~]$

[superman@wae-7-1-1-etisalat ~]$ cal
    November 2019
Su Mo Tu We Th Fr Sa
                1  2
 3  4  5  6  7  8  9
10 11 12 13 14 15 16
17 18 19 20 21 22 23
24 25 26 27 28 29 30

[superman@wae-7-1-1-etisalat ~]$ cal 9 1993
   September 1993
Su Mo Tu We Th Fr Sa
          1  2  3  4
 5  6  7  8  9 10 11
12 13 14 15 16 17 18
19 20 21 22 23 24 25
26 27 28 29 30

[superman@wae-7-1-1-etisalat ~]$

7)
[root@wae-7-1-1-etisalat ~]# bc
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type 'warranty'. #for quiting -> just type "quit"
2+2
4
256*321
82176

#Sec 5 #86
#Processes and Jobs

1. Application = Service (NTP,NFS,rsyslog,Apache n whole buch of diff programs..run on ur computer..) 
2. Script => written in file.. and run as execultable..
3. Process => when u start an application, it generates Process, process id is generated.. service can be assosiated with 1 or more processes
4. Daemon => is when compared.. to process => something.. continuosly runs..without stopping..can be listening to traffic
5. Threads => every process can have multiple threads assosiated with it..service-> process -> thread-1,2,3,4..etc.
6. Job => or workoder => run a service or process at a schedule time..

process n service commands..
1) systemctl or service => old command in centos/rhel is service it is being replaced with systemctl
2) ps => allows to see what process are running in linux
3) top => u will see all process running on systems..see based on load/cpu util 
4) kill => kills process by process id or process name..(you can stop process by systemctl or kill command)
5) crontab => to run scheduler..when it is scheduled it becomes ajob..
6) at => just like crontab , but can be schedule one time.. (adhoc)


#ntp is replaced by chronyd service in rhel..

[root@wae-7-1-1-etisalat ~]# date
Tue Nov 19 18:22:29 IST 2019
[root@wae-7-1-1-etisalat ~]# systemctl restart ntpd
[root@wae-7-1-1-etisalat ~]# ps -ef | grep ntp
ntp      31305     1  0 18:22 ?        00:00:00 /usr/sbin/ntpd -u ntp:ntp -g
root     31308 23053  0 18:22 pts/2    00:00:00 grep --color=auto ntp
[root@wae-7-1-1-etisalat ~]# systemctl status ntpd
● ntpd.service - Network Time Service
   Loaded: loaded (/usr/lib/systemd/system/ntpd.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2019-11-19 18:22:36 IST; 14s ago
  Process: 31304 ExecStart=/usr/sbin/ntpd -u ntp:ntp $OPTIONS (code=exited, status=0/SUCCESS)
 Main PID: 31305 (ntpd)
    Tasks: 1
   CGroup: /system.slice/ntpd.service
           └─31305 /usr/sbin/ntpd -u ntp:ntp -g

Nov 19 18:22:36 wae-7-1-1-etisalat ntpd[31305]: Listen normally on 3 ens160 10.105.217.74 UDP 123
Nov 19 18:22:36 wae-7-1-1-etisalat ntpd[31305]: Listen normally on 4 virbr0 192.168.122.1 UDP 123
Nov 19 18:22:36 wae-7-1-1-etisalat ntpd[31305]: Listen normally on 5 tap0 172.21.41.20 UDP 123
Nov 19 18:22:36 wae-7-1-1-etisalat ntpd[31305]: Listen normally on 6 lo ::1 UDP 123
Nov 19 18:22:36 wae-7-1-1-etisalat ntpd[31305]: Listen normally on 7 ens160 fe80::ad2a:f1c8:2c0a:f891 UDP 123
Nov 19 18:22:36 wae-7-1-1-etisalat ntpd[31305]: Listen normally on 8 tap0 fe80::2cd3:a8ff:fef8:e18d UDP 123
Nov 19 18:22:36 wae-7-1-1-etisalat ntpd[31305]: Listening on routing socket on fd #25 for interface updates
Nov 19 18:22:37 wae-7-1-1-etisalat ntpd[31305]: 0.0.0.0 c016 06 restart
Nov 19 18:22:37 wae-7-1-1-etisalat ntpd[31305]: 0.0.0.0 c012 02 freq_set kernel 0.000 PPM
Nov 19 18:22:37 wae-7-1-1-etisalat ntpd[31305]: 0.0.0.0 c011 01 freq_not_set
[root@wae-7-1-1-etisalat ~]#

#starts ntpd when linux starts..automatically..(enabling an application..)
[root@wae-7-1-1-etisalat ~]# systemctl enable ntpd
Created symlink from /etc/systemd/system/multi-user.target.wants/ntpd.service to /usr/lib/systemd/system/ntpd.service.
[root@wae-7-1-1-etisalat ~]#

#rsyslog => collects logs..
[root@wae-7-1-1-etisalat ~]# ps -ef | grep rsyslog
root      1138     1  0 Oct17 ?        00:02:01 /usr/sbin/rsyslogd -n
root     31550 23053  0 18:26 pts/2    00:00:00 grep --color=auto rsyslog
[root@wae-7-1-1-etisalat ~]#

[root@wae-7-1-1-etisalat ~]# systemctl status rsyslog
● rsyslog.service - System Logging Service
   Loaded: loaded (/usr/lib/systemd/system/rsyslog.service; enabled; vendor preset: enabled)
   Active: active (running) since Thu 2019-10-17 13:17:55 IST; 1 months 2 days ago
     Docs: man:rsyslogd(8)
           http://www.rsyslog.com/doc/
 Main PID: 1138 (rsyslogd)
   CGroup: /system.slice/rsyslog.service
           └─1138 /usr/sbin/rsyslogd -n

Oct 17 13:17:55 wae-7-1-1-etisalat systemd[1]: Starting System Logging Service...
Oct 17 13:17:55 wae-7-1-1-etisalat rsyslogd[1138]:  [origin software="rsyslogd" swVersion="8.24.0" x-pid="1138" x-info="http://www..." start
Oct 17 13:17:55 wae-7-1-1-etisalat systemd[1]: Started System Logging Service.
Nov 16 23:50:16 wae-7-1-1-etisalat rsyslogd[1138]: imjournal: journal reloaded... [v8.24.0 try http://www.rsyslog.com/e/0 ]
Hint: Some lines were ellipsized, use -l to show in full.
[root@wae-7-1-1-etisalat ~]#

#IMP #interview.. ask - how will you monitor system ? you can tell them by top command ..
top - 18:27:28 up 33 days,  5:09,  5 users,  load average: 0.06, 0.24, 0.43
Tasks: 369 total,   1 running, 367 sleeping,   0 stopped,   1 zombie # => 369 tasks -> 1 are run,  367 sleep and 1 zombie
%Cpu(s):  1.8 us,  0.8 sy,  0.0 ni, 97.3 id,  0.1 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 65806792 total, 48320856 free,  8838128 used,  8647808 buff/cache
KiB Swap: 10485756 total, 10485756 free,        0 used. 56175732 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
  840 polkitd   20   0  546400  20884   5300 S  16.2  0.0   7458:44 polkitd
  836 dbus      20   0   61672   3684   1864 S   6.6  0.0   2995:16 dbus-daemon
31118 wae       20   0 9837120 392164  16656 S   6.0  0.6   1132:42 java
  870 root      20   0  400188   8172   3268 S   5.3  0.0   2396:22 accounts-daemon
 6417 wae       20   0 1361724  56868  10604 S   5.3  0.1   1211:36 python
 2361 wae       20   0  611412   8724   5216 S   2.0  0.0 939:48.82 gsd-account
 6221 wae       20   0 7186992  97144  31940 S   1.3  0.1 232:15.50 continuous_poll
31215 wae       20   0   29.2g   5.2g 106768 S   1.3  8.3 339:50.60 java
13746 wae       20   0 4096524  76988  10556 S   1.0  0.1 156:56.46 python

#SPEND some tome to learn output of this command..

#any process that is Hung..you could kill it..=> how do you it is hung.. type top command and see process who are using CPU, MEM => 99.99 %

[root@wae-7-1-1-etisalat ~]# top
top - 18:35:32 up 33 days,  5:17,  5 users,  load average: 0.16, 0.15, 0.30
Tasks: 369 total,   1 running, 367 sleeping,   0 stopped,   1 zombie
%Cpu(s):  1.8 us,  0.8 sy,  0.0 ni, 97.4 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 65806792 total, 48319516 free,  8839064 used,  8648212 buff/cache
KiB Swap: 10485756 total, 10485756 free,        0 used. 56174796 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
  840 polkitd   20   0  546400  20884   5300 S  16.6  0.0   7460:02 polkitd
  836 dbus      20   0   61672   3684   1864 S   6.6  0.0   2995:48 dbus-daemon
  870 root      20   0  400188   8172   3268 S   5.3  0.0   2396:47 accounts-daemon
31118 wae       20   0 9857600 392164  16656 S   4.7  0.6   1133:04 java
 6417 wae       20   0 1361724  58892  10604 S   4.0  0.1   1211:59 python

 [root@wae-7-1-1-etisalat ~]# ps -eaf | grep polkitd
polkitd    840     1 15 Oct17 ?        5-04:20:04 /usr/lib/polkit-1/polkitd --no-debug
root     32146 23053  0 18:35 pts/2    00:00:00 grep --color=auto polkitd

#CRONTAB..

crontab -e => to edit...
min hr day-of-month mon day-of-week 
22 13 * 3 * echo "This is my first crontab entry" > crontab-entry

crontab -l => to see active crontabs.. :)

#YOUTUBE LEC-1 => https://www.youtube.com/watch?v=wV-DmYTQS9s

[root@wae-7-1-1-etisalat ~]# arch
x86_64
[root@wae-7-1-1-etisalat ~]#
[root@wae-7-1-1-etisalat ~]# cat /etc/*-release
CentOS Linux release 7.5.1804 (Core)
NAME="CentOS Linux"
VERSION="7 (Core)"
ID="centos"
ID_LIKE="rhel fedora"
VERSION_ID="7"
PRETTY_NAME="CentOS Linux 7 (Core)"
ANSI_COLOR="0;31"
CPE_NAME="cpe:/o:centos:centos:7"
HOME_URL="https://www.centos.org/"
BUG_REPORT_URL="https://bugs.centos.org/"

CENTOS_MANTISBT_PROJECT="CentOS-7"
CENTOS_MANTISBT_PROJECT_VERSION="7"
REDHAT_SUPPORT_PRODUCT="centos"
REDHAT_SUPPORT_PRODUCT_VERSION="7"

CentOS Linux release 7.5.1804 (Core)
CentOS Linux release 7.5.1804 (Core)
[root@wae-7-1-1-etisalat ~]# echo $MACHTYPE
x86_64-redhat-linux-gnu
[root@wae-7-1-1-etisalat ~]# uname -ar
Linux wae-7-1-1-etisalat 3.10.0-862.9.1.el7.x86_64 #1 SMP Mon Jul 16 16:29:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
[root@wae-7-1-1-etisalat ~]#
[root@wae-7-1-1-etisalat ~]# uptime
 16:36:55 up 34 days,  3:19,  4 users,  load average: 0.14, 0.36, 0.48
[root@wae-7-1-1-etisalat ~]# uptime -p
up 4 weeks, 6 days, 3 hours, 19 minutes
[root@wae-7-1-1-etisalat ~]# free -m
              total        used        free      shared  buff/cache   available
Mem:          64264        8622       46735          53        8906       54867
Swap:         10239           0       10239
[root@wae-7-1-1-etisalat ~]#
[root@wae-7-1-1-etisalat ~]#
[root@wae-7-1-1-etisalat ~]# free -g
              total        used        free      shared  buff/cache   available
Mem:             62           8          45           0           8          53
Swap:             9           0           9

##free -h => displays in human readable format.. :)
[root@wae-7-1-1-etisalat ~]# free -h
              total        used        free      shared  buff/cache   available
Mem:            62G        8.4G         45G         53M        8.7G         53G
Swap:            9G          0B          9G
[root@wae-7-1-1-etisalat ~]#


#TO Know what users are connected to the system...

[root@wae-7-1-1-etisalat ~]# who
wae      :0           Oct 17 13:19 (:0)
wae      pts/0        Oct 17 13:19 (:0)
wae      pts/1        Oct 17 13:20 (:0)
root     pts/2        Nov 20 16:34 (10.65.68.190)
[root@wae-7-1-1-etisalat ~]#

#To check how u are connected..=> SSH/TELNET etc..=> lsof is used to check open files..

[root@wae-7-1-1-etisalat ~]# lsof -i | grep 10.65.68.190
sshd      15704   root    3u  IPv4 218977294      0t0  TCP wae-7-1-1-etisalat:ssh->10.65.68.190:62382 (ESTABLISHED)
[root@wae-7-1-1-etisalat ~]#


#lsof -u root => displays all list of files opened by user..root ! :)

#YOU can know about ur processor..

[root@wae-7-1-1-etisalat ~]# cat /proc/cpuinfo
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 79
model name	: Intel(R) Xeon(R) CPU E5-2683 v4 @ 2.10GHz
stepping	: 1
microcode	: 0xb00001f
cpu MHz		: 2094.952
cache size	: 40960 KB
physical id	: 0
siblings	: 4
core id		: 0
cpu cores	: 4
apicid		: 0

[root@wae-7-1-1-etisalat ~]# cat /proc/meminfo
MemTotal:       65806792 kB
MemFree:        47858260 kB
MemAvailable:   56182560 kB
Buffers:            2128 kB
Cached:          8602772 kB
SwapCached:            0 kB
Active:         11583804 kB
Inactive:        5118888 kB
Active(anon):    8119524 kB
Inactive(anon):    33308 kB
Active(file):    3464280 k

#disk free human redable => to find available diskspace..(-h => human readable)

[root@wae-7-1-1-etisalat ~]# df -h
Filesystem                                      Size  Used Avail Use% Mounted on
/dev/mapper/centos_wae--7--1--1--etisalat-root   50G   49G  1.5G  98% /
devtmpfs                                         32G     0   32G   0% /dev
tmpfs                                            32G     0   32G   0% /dev/shm
tmpfs                                            32G   50M   32G   1% /run
tmpfs                                            32G     0   32G   0% /sys/fs/cgroup
/dev/sda1                                      1014M  221M  794M  22% /boot
/dev/mapper/centos_wae--7--1--1--etisalat-home   39G  649M   39G   2% /home
tmpfs                                           6.3G  4.0K  6.3G   1% /run/user/42
tmpfs                                           6.3G   20K  6.3G   1% /run/user/1001
tmpfs                                           6.3G     0  6.3G   0% /run/user/0

# du -sh / => disk usage summarize in human redable..format.. how much root partion has used the space..?
[root@wae-7-1-1-etisalat /]# du -sh /
du: cannot access '/proc/16869': No such file or directory
du: cannot access '/proc/16871/task/16871/fd/3': No such file or directory
du: cannot access '/proc/16871/task/16871/fdinfo/3': No such file or directory
du: cannot access '/proc/16871/fd/4': No such file or directory
du: cannot access '/proc/16871/fdinfo/4': No such file or directory
du: cannot access '/run/user/1001/gvfs': Permission denied
50G	/
[root@wae-7-1-1-etisalat /]#

#LIST Block device..lists aim of block device and its partions..

[root@wae-7-1-1-etisalat /]# lsblk
NAME                                   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
fd0                                      2:0    1    4K  0 disk
sda                                      8:0    0  100G  0 disk
|-sda1                                   8:1    0    1G  0 part /boot
`-sda2                                   8:2    0   99G  0 part
  |-centos_wae--7--1--1--etisalat-root 253:0    0   50G  0 lvm  /
  |-centos_wae--7--1--1--etisalat-swap 253:1    0   10G  0 lvm  [SWAP]
  `-centos_wae--7--1--1--etisalat-home 253:2    0   39G  0 lvm  /home
sr0                                     11:0    1 1024M  0 rom
[root@wae-7-1-1-etisalat /]#

#list all processes...

[wae@wae-7-1-1-etisalat opt]$ ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0 192116  5136 ?        Ss   Oct17   8:48 /usr/lib/systemd/systemd --switched-root --system --deserialize 22
root         2  0.0  0.0      0     0 ?        S    Oct17   0:00 [kthreadd]
root         3  0.0  0.0      0     0 ?        S    Oct17   0:07 [ksoftirqd/0]
root         5  0.0  0.0      0     0 ?        S<   Oct17   0:00 [kworker/0:0H]
root         8  0.0  0.0      0     0 ?        S    Oct17   0:03 [migration/0]
root         9  0.0  0.0      0     0 ?        S    Oct17   0:00 [rcu_bh]
root        10  0.1  0.0      0     0 ?        S    Oct17  89:39 [rcu_sched]
root        11  0.0  0.0      0     0 ?        S<   Oct17   0:00 [lru-add-drain]

#filters processes..
[wae@wae-7-1-1-etisalat opt]$ ps aux | grep supervi
wae      17608  0.0  0.0 112708   976 pts/2    S+   17:03   0:00 grep --color=auto supervi
wae      23947  0.0  0.0 222932 15904 ?        Ss   Oct31   6:46 /bin/python /usr/bin/supervisord -c /etc/supervisord.conf
[wae@wae-7-1-1-etisalat opt]$

#netstat -antlup => Lists all the state of listening..the foregin addresses/local addresses and state it is listening or not listening..
#we can also see PID and program name..(running)

[root@wae-7-1-1-etisalat /]# netstat -antlup
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:8443            0.0.0.0:*               LISTEN      31070/ncs.smp
tcp        0      0 127.0.0.1:36355         0.0.0.0:*               LISTEN      6613/designapid
tcp        0      0 0.0.0.0:2022            0.0.0.0:*               LISTEN      31070/ncs.smp
tcp        0      0 0.0.0.0:2024            0.0.0.0:*               LISTEN      31070/ncs.smp
tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      837/rpcbind
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      31070/ncs.smp
tcp        0      0 127.0.0.1:4242          0.0.0.0:*               LISTEN      6417/python
tcp        0      0 192.168.122.1:53        0.0.0.0:*               LISTEN      1666/dnsmasq
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1133/sshd
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      1135/cupsd

[root@wae-7-1-1-etisalat /]# ps aux | grep designapid
wae       6613  0.0  0.1 636564 71984 ?        Sl   Nov01   2:49 /opt/wae713/bin/designapid -host localhost -port 36355 -protocol tcp
root     17894  0.0  0.0 112680   984 pts/2    S+   17:08   0:00 grep --color=auto designapid
[root@wae-7-1-1-etisalat /]# netstat -antlup | grep designapid
tcp        0      0 127.0.0.1:36355         0.0.0.0:*               LISTEN      6613/designapid
[root@wae-7-1-1-etisalat /]#

#IF you forgot somecommand..and u remember it partly.. u can use => it will show list of commads with descriptions where things are possible.

[root@wae-7-1-1-etisalat /]# man -k ping
man: can't set the locale; make sure $LC_* and $LANG are correct'
ping (8)             - send ICMP ECHO_REQUEST to network hosts
ping6 (8)            - send ICMP ECHO_REQUEST to network hosts
posix_trace_eventtypelist_getnext_id (3p) - iterate over a mapping of trace event types (TRACING)
posix_trace_eventtypelist_rewind (3p) - iterate over a mapping of trace event types (TRACING)
probe::signal.wakeup (3stap) - Sleeping process being wakened for signal

###VERY HANDY command fro troubleshooting..
[root@wae-7-1-1-etisalat /]# man -k ssh
man: can't set the locale; make sure $LC_* and $LANG are correct
git-shell (1)        - Restricted login shell for Git-only SSH access
ksshaskpass (1)      - prompts a user for a passphrase using KDE
ksshell (1)          - an interactive kickstart shell
slogin (1)           - OpenSSH SSH client (remote login program)
ssh (1)              - OpenSSH SSH client (remote login program)
ssh-add (1)          - adds private key identities to the authentication agent
ssh-agent (1)        - authentication agent
ssh-copy-id (1)      - use locally available keys to authorise logins on a remote machine
ssh-keygen (1)       - authentication key generation, management and conversion
ssh-keyscan (1)      - gather ssh public keys
ssh-keysign (8)      - ssh helper program for host-based authentication
ssh-pkcs11-helper (8) - ssh-agent helper program for PKCS#11 support
ssh_config (5)       - OpenSSH SSH client configuration files
sshd (8)             - OpenSSH SSH daemon
sshd_config (5)      - OpenSSH SSH daemon configuration file
XAllocClassHint (3)  - allocate class hints structure and set or read a window's WM_CLASS property
XClassHint (3)       - allocate class hints structure and set or read a window's WM_CLASS property
XGetClassHint (3)    - allocate class hints structure and set or read a window's WM_CLASS property
XSetClassHint (3)    - allocate class hints structure and set or read a window's WM_CLASS property'
[root@wae-7-1-1-etisalat /]#

#RPM => redhat package manager
#SAYS what version of httpd is installed in your system...
[root@wae-7-1-1-etisalat /]# rpm -qa httpd
httpd-2.4.6-90.el7.centos.x86_64
[root@wae-7-1-1-etisalat /]#

#CHECK everything where httpd is present in it...=>
[root@wae-7-1-1-etisalat /]# rpm -ql httpd
/etc/httpd
/etc/httpd/conf
/etc/httpd/conf.d
/etc/httpd/conf.d/README
/etc/httpd/conf.d/autoindex.conf
/etc/httpd/conf.d/userdir.conf
/etc/httpd/conf.d/welcome.conf
/etc/httpd/conf.modules.d
/etc/httpd/conf.modules.d/00-base.conf
/etc/httpd/conf.modules.d/00-dav.conf
/etc/httpd/conf.modules.d/00-lua.conf
/etc/httpd/conf.modules.d/00-mpm.conf
/etc/httpd/conf.modules.d/00-proxy.conf
/etc/httpd/conf.modules.d/00-systemd.conf
/etc/httpd/conf.modules.d/01-cgi.conf
/etc/httpd/conf/httpd.conf
/etc/httpd/conf/magic
/etc/httpd/logs
/etc/httpd/modules
/etc/httpd/run

#install something using yum

[root@wae-7-1-1-etisalat html]# yum -y install yum-utils

[root@wae-7-1-1-etisalat html]# repoquery -l httpd #=> list all the things which has httpd in it..
Failed to set locale, defaulting to C
/etc/httpd
/etc/httpd/conf
/etc/httpd/conf.d
/etc/httpd/conf.d/README
/etc/httpd/conf.d/autoindex.conf
/etc/httpd/conf.d/userdir.conf
/etc/httpd/conf.d/welcome.conf
/etc/httpd/conf.modules.d
/etc/httpd/conf.modules.d/00-base.conf
/etc/httpd/conf.modules.d/00-dav.conf
/etc/httpd/conf.modules.d/00-lua.conf
/etc/httpd/conf.modules.d/00-mpm.conf

#top command.. => lists users, PID, Nice values.

[root@wae-7-1-1-etisalat html]# top
top - 17:29:26 up 34 days,  4:11,  4 users,  load average: 0.08, 0.11, 0.13 #load average: 0.08, 0.11, 0.13 => 0.08 (current load avg), 0.11(load avg 5 min back)
																											#0.13 => load avg hours back)
Tasks: 363 total,   1 running, 361 sleeping,   0 stopped,   1 zombie
%Cpu(s):  1.8 us,  1.7 sy,  0.0 ni, 96.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 65806792 total, 46868464 free,  8897744 used, 10040584 buff/cache
KiB Swap: 10485756 total, 10485756 free,        0 used. 56085656 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
31118 wae       20   0 9878080 395552  16656 S  18.9  0.6   1193:55 java
  840 polkitd   20   0  546400  20884   5300 S  15.6  0.0   7680:33 polkitd
  836 dbus      20   0   61672   3684   1864 S   6.6  0.0   3083:44 dbus-daemon
  870 root      20   0  400188   8172   3268 S   5.3  0.0   2467:31 accounts-daemon
13746 wae       20   0 4096524  76988  10556 S   5.0  0.1 167:57.50 python
 6417 wae       20   0 1361724  56868  10604 S   4.7  0.1   1279:02 python

 #press 1 => lists cpu info

 [root@wae-7-1-1-etisalat /]# top
top - 17:36:36 up 34 days,  4:19,  4 users,  load average: 0.71, 0.39, 0.23
Tasks: 364 total,   3 running, 360 sleeping,   0 stopped,   1 zombie
%Cpu0  :  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu1  :  2.7 us,  2.3 sy,  0.0 ni, 95.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu2  :  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu3  :  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu4  :  4.7 us,  2.7 sy,  0.0 ni, 92.6 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu5  :  1.3 us,  0.3 sy,  0.0 ni, 98.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu6  :  1.0 us,  0.0 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu7  :  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu8  :  1.0 us,  0.3 sy,  0.0 ni, 98.3 id,  0.0 wa,  0.0 hi,  0.3 si,  0.0 st
%Cpu9  :  2.3 us,  1.0 sy,  0.0 ni, 96.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu10 :  2.3 us,  1.0 sy,  0.0 ni, 96.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu11 :  1.7 us,  0.3 sy,  0.0 ni, 98.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu12 :  2.3 us,  0.7 sy,  0.0 ni, 97.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu13 :  2.0 us,  0.7 sy,  0.0 ni, 97.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu14 :  2.0 us,  0.3 sy,  0.0 ni, 97.3 id,  0.0 wa,  0.0 hi,  0.3 si,  0.0 st
%Cpu15 :  2.7 us,  1.0 sy,  0.0 ni, 96.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 65806792 total, 46909420 free,  8882248 used, 10015124 buff/cache
KiB Swap: 10485756 total, 10485756 free,        0 used. 56101488 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
  840 polkitd   20   0  546400  20884   5300 R  15.9  0.0   7681:41 polkitd
  836 dbus      20   0   61672   3684   1864 S   6.0  0.0   3084:12 dbus-daemon
31118 wae       20   0 9755200 395552  16656 S   5.3  0.6   1194:12 java
  870 root      20   0  400188   8172   3268 S   5.0  0.0   2467:52 accounts-dae


 #press "M" => lists process by memory usage(highest to lowest)

 [root@wae-7-1-1-etisalat /]# top
top - 17:36:56 up 34 days,  4:19,  4 users,  load average: 1.01, 0.47, 0.26
Tasks: 364 total,   1 running, 362 sleeping,   0 stopped,   1 zombie
%Cpu(s):  1.8 us,  0.8 sy,  0.0 ni, 97.3 id,  0.0 wa,  0.0 hi,  0.1 si,  0.0 st
KiB Mem : 65806792 total, 46908716 free,  8882360 used, 10015716 buff/cache
KiB Swap: 10485756 total, 10485756 free,        0 used. 56101400 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
31215 wae       20   0   29.2g   5.2g 106768 S   1.0  8.3 358:16.35 java
31070 wae       20   0 2567900 427372  19156 S   0.3  0.6  63:22.43 ncs.smp
31118 wae       20   0 9755200 395552  16656 S   3.6  0.6   1194:13 java
31015 wae       20   0 5575760 230956  16428 S   0.3  0.4  33:02.17 java
 6221 wae       20   0 7186992  97252  31940 S   0.7  0.1 245:30.41 continuous_poll
13746 wae       20   0 4096524  76988  10556 S   3.0  0.1 168:00.90 python
 2535 wae       20   0 1064380  74512  16108 S   0.0  0.1   2:43.11 gnome-software
 6613 wae       20   0  636564  71984  48532 S   1.7  0.1   2:49.77 designapid
10454 wae       20   0  412152  68084   6472 S   0.0  0.1   0:06.93 httpd
 6417 wae       20   0 1361724  56868  10604 S   4.6  0.1   1279:23 python
 6376 wae       20   0  998024  54652   9516 S   0.3  0.1  22:51.16 python
 6440 wae       20   0  990428  51724   9460 S   0.0  0.1  23:01.44 python
 6426 wae       20   0  912856  49724   9132 S   0.3  0.1  21:56.13 python

 #youtube 2 => https://www.youtube.com/watch?v=yACI110TJYc

 1. we need to gather as information as possible..related to problem..
 2. keep focus on problem,dont overlook on issue..
 3. once issue is found test and validate it. => we will need to fix the problem.

 1) lscpu => cat /proc/cpuinfo
 2) dmidecode => gives info about motherboard
 3) [root@wae-7-1-1-etisalat /]# lspci
00:00.0 Host bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX Host bridge (rev 01)
00:01.0 PCI bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX AGP bridge (rev 01)
00:07.0 ISA bridge: Intel Corporation 82371AB/EB/MB PIIX4 ISA (rev 08)
00:07.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01)
00:07.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 08)
00:07.7 System peripheral: VMware Virtual Machine Communication Interface (rev 10)
00:0f.0 VGA compatible controller: VMware SVGA II Adapter
00:10.0 SCSI storage controller: LSI Logic / Symbios Logic 53c1030 PCI-X Fusion-MPT Dual Ultra320 SCSI (rev 01)
00:11.0 PCI bridge: VMware PCI bridge (rev 02)
00:15.0 PCI bridge: VMware PCI Express Root Port (rev 01)
00:15.1 PCI bridge: VMware PCI Express Root Port (rev 01)
4)[root@wae-7-1-1-etisalat /]# arch
x86_64
[root@wae-7-1-1-etisalat /]#
5)[root@wae-7-1-1-etisalat /]# echo $MACHTYPE
x86_64-redhat-linux-gnu
[root@wae-7-1-1-etisalat /]#
6)

#VAR Logs
[root@wae-7-1-1-etisalat log]# pwd
/var/log
[root@wae-7-1-1-etisalat log]# ls -lartm
speech-dispatcher, ppp, qemu-ga, chrony, glusterfs, sa, libvirt, dmesg.old, dmesg, vmware-vgauthsvc.log.0, tallylog, grubby_prune_debug,
samba, pluto, mariadb, spooler, anaconda, rhsm, firewalld, cups, Xorg.9.log, audit, grubby, .., Xorg.1.log, vmware-vmusr.log, supervisor,
httpd, ntpstats, tuned, Xorg.0.log.old, maillog, boot.log, gdm, wpa_supplicant.log, vmware-vmsvc.log, Xorg.0.log, btmp, cron, ., wtmp,
lastlog, secure, yum.log, messages
[root@wae-7-1-1-etisalat log]#

#dmesg => log for kernel => when statrteing machine it is info about all kernel related things..
[root@wae-7-1-1-etisalat log]# dmesg | more
[    0.000000] Initializing cgroup subsys cpuset
[    0.000000] Initializing cgroup subsys cpu
[    0.000000] Initializing cgroup subsys cpuacct
[    0.000000] Linux version 3.10.0-862.9.1.el7.x86_64 (builder@kbuilder.dev.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-28) (GC
C) ) #1 SMP Mon Jul 16 16:29:36 UTC 2018
[    0.000000] Command line: BOOT_IMAGE=/vmlinuz-3.10.0-862.9.1.el7.x86_64 root=/dev/mapper/centos_wae--7--1--1--etisalat-root ro crashkern
el=auto rd.lvm.lv=centos_wae-7-1-1-etisalat/root rd.lvm.lv=centos_wae-7-1-1-etisalat/swap rhgb quiet LANG=en_US.UTF-8

[root@wae-7-1-1-etisalat log]# man -k dmesg
man: can't set the locale; make sure $LC_* and $LANG are correct'
abrt-action-check-oops-for-hw-error (1) - Checks dmesg element, marks problem as not-reportable if hardware error is detected
dmesg (1)            - print or control the kernel ring buffer
vmcore-dmesg (8)     - This is just a placeholder until real man page has been written
[root@wae-7-1-1-etisalat log]#

#secure => tells info about who tried to ssh in to ur computer..

[root@wae-7-1-1-etisalat log]# tail -f secure
Nov 20 11:26:06 wae-7-1-1-etisalat sshd[29016]: pam_unix(sshd:session): session opened for user wae by (uid=0)
Nov 20 11:26:13 wae-7-1-1-etisalat sudo:     wae : TTY=pts/2 ; PWD=/home/wae ; USER=root ; COMMAND=/bin/su
Nov 20 11:26:13 wae-7-1-1-etisalat su: pam_unix(su:session): session opened for user root by wae(uid=0)
Nov 20 11:37:46 wae-7-1-1-etisalat sshd[17781]: pam_unix(sshd:session): session closed for user root
Nov 20 13:53:50 wae-7-1-1-etisalat sshd[29016]: pam_unix(sshd:session): session closed for user wae
Nov 20 13:53:50 wae-7-1-1-etisalat su: pam_unix(su:session): session closed for user root
Nov 20 16:34:41 wae-7-1-1-etisalat sshd[15704]: Accepted password for root from 10.65.68.190 port 62382 ssh2
Nov 20 16:34:41 wae-7-1-1-etisalat sshd[15704]: pam_unix(sshd:session): session opened for user root by (uid=0)
Nov 20 16:57:24 wae-7-1-1-etisalat su: pam_unix(su-l:session): session opened for user wae by root(uid=0)
Nov 20 17:05:12 wae-7-1-1-etisalat su: pam_unix(su-l:session): session closed for user wae


^C
#head prints lines 5
[root@wae-7-1-1-etisalat log]# head -5 secure
Sep  8 00:59:05 wae-7-1-1-etisalat polkitd[885]: Loading rules from directory /etc/polkit-1/rules.d
Sep  8 00:59:05 wae-7-1-1-etisalat polkitd[885]: Loading rules from directory /usr/share/polkit-1/rules.d
Sep  8 00:59:05 wae-7-1-1-etisalat polkitd[885]: Finished loading, compiling and executing 9 rules
Sep  8 00:59:05 wae-7-1-1-etisalat polkitd[885]: Acquired the name org.freedesktop.PolicyKit1 on the system bus
Sep  8 00:59:09 wae-7-1-1-etisalat sshd[1356]: Server listening on 0.0.0.0 port 22



#USER Login/exit logged in /var/log/secure => :)

EX-
[root@wae-7-1-1-etisalat log]# tailf secure

Nov 20 18:10:56 wae-7-1-1-etisalat sshd[21644]: Accepted publickey for wae from 10.65.68.190 port 64661 ssh2: RSA SHA256:jVzwxxS/YVsNzx/cp/ihkFe60F2Z5L58+DvMwi9dTVQ
Nov 20 18:10:56 wae-7-1-1-etisalat sshd[21644]: pam_unix(sshd:session): session opened for user wae by (uid=0)
Nov 20 18:11:15 wae-7-1-1-etisalat sshd[21646]: Received disconnect from 10.65.68.190 port 64661:11: disconnected by user
Nov 20 18:11:15 wae-7-1-1-etisalat sshd[21646]: Disconnected from 10.65.68.190 port 64661
Nov 20 18:11:15 wae-7-1-1-etisalat sshd[21644]: pam_unix(sshd:session): session closed for user wae
Nov 20 18:11:59 wae-7-1-1-etisalat sshd[21769]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=10.65.68.190  user=root
Nov 20 18:11:59 wae-7-1-1-etisalat sshd[21769]: pam_succeed_if(sshd:auth): requirement "uid >= 1000" not met by user "root"
Nov 20 18:12:01 wae-7-1-1-etisalat sshd[21769]: Failed password for root from 10.65.68.190 port 64670 ssh2
Nov 20 18:12:11 wae-7-1-1-etisalat sshd[21769]: Accepted password for root from 10.65.68.190 port 64670 ssh2
Nov 20 18:12:11 wae-7-1-1-etisalat sshd[21769]: pam_unix(sshd:session): session opened for user root by (uid=0)

#whenever system reboots journalctl is rewritten.. however we can also try to append it.. 

#journalctl -xb => gives all information regarding BOOT
[root@wae-7-1-1-etisalat log]# journalctl -xb
-- Logs begin at Fri 2018-07-06 01:01:32 IST, end at Wed 2019-11-20 18:12:11 IST. --
Jul 06 01:01:32 wae-7-1-1-etisalat systemd-journal[176]: Runtime journal is using 8.0M (max allowed 3.1G, trying to leave 4.0G free of 31.3
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: Initializing cgroup subsys cpuset
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: Initializing cgroup subsys cpu
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: Initializing cgroup subsys cpuacct
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: Linux version 3.10.0-862.9.1.el7.x86_64 (builder@kbuilder.dev.centos.org) (gcc version 4.8.5 201
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: Command line: BOOT_IMAGE=/vmlinuz-3.10.0-862.9.1.el7.x86_64 root=/dev/mapper/centos_wae--7--1--1
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: Disabled fast string operations
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: e820: BIOS-provided physical RAM map:
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: BIOS-e820: [mem 0x0000000000000000-0x000000000009f3ff] usable


#journalctl -ef => follows, it follows whatever happening in real-time..=> follow in real-time..

#we can also set priorty in journalctl => err,warning
[root@wae-7-1-1-etisalat log]# journalctl -p err
-- Logs begin at Fri 2018-07-06 01:01:32 IST, end at Wed 2019-11-20 18:12:11 IST. --
Jul 06 01:01:33 wae-7-1-1-etisalat kernel: sd 0:0:0:0: [sda] Assuming drive cache: write through
Jul 06 01:01:44 wae-7-1-1-etisalat kernel: piix4_smbus 0000:00:07.3: SMBus Host Controller not enabled!
Jul 06 01:01:46 wae-7-1-1-etisalat auditd[826]: Error - /etc/audit/auditd.conf isn't owned by root'
Jul 06 01:01:46 wae-7-1-1-etisalat systemd[1]: Failed to start Security Auditing Service.
Oct 17 13:17:54 wae-7-1-1-etisalat abrtd[863]: '/var/spool/abrt/ccpp-2019-02-15-17:35:43-5892' is not a problem directory
Oct 17 13:18:07 wae-7-1-1-etisalat spice-vdagent[1929]: Cannot access vdagent virtio channel /dev/virtio-ports/com.redhat.spice.0
Oct 17 13:19:43 wae-7-1-1-etisalat gnome-session-binary[2085]: Unrecoverable failure in required component org.gnome.Shell.desktop
Oct 17 13:19:43 wae-7-1-1-etisalat spice-vdagent[2360]: Cannot access vdagent virtio channel /dev/virtio-ports/com.redhat.spice.0
Oct 17 13:19:44 wae-7-1-1-etisalat pulseaudio[2469]: [pulseaudio] pid.c: Daemon already running.
Oct 17 13:20:08 wae-7-1-1-etisalat pulseaudio[2459]: [pulseaudio] bluez5-util.c: GetManagedObjects() failed: org.freedesktop.DBus.Error.NoR
Oct 17 13:24:39 wae-7-1-1-etisalat ncs[2990]: - Daemon ncs-dp-3196-te-portal-app:lsp-prov-commit died

[root@wae-7-1-1-etisalat log]# journalctl -p warning | more
-- Logs begin at Fri 2018-07-06 01:01:32 IST, end at Wed 2019-11-20 18:18:36 IST. --
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: ACPI: RSDP 00000000000f6b80 00024 (v02 PTLTD )
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: ACPI: XSDT 00000000bfef095b 0005C (v01 INTEL  440BX    06040000 VMW  01324272)
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: ACPI: FACP 00000000bfefee73 000F4 (v04 INTEL  440BX    06040000 PTL  000F4240)
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: ACPI: DSDT 00000000bfef0e25 0E04E (v01 PTLTD  Custom   06040000 MSFT 03000001)
Jul 06 01:01:32 wae-7-1-1-etisalat kernel: ACPI: FACS 00000000bfefffc0 00040

[root@wae-7-1-1-etisalat log]# journalctl -o verbose #lot of information it will give..
-- Logs begin at Fri 2018-07-06 01:01:32 IST, end at Wed 2019-11-20 18:18:36 IST. --
Fri 2018-07-06 01:01:32.595998 IST [s=aefb2eb4921c4a01b6850e55aa9ac00d;i=1;b=a89a50faa14240298e00122cdbb328a0;m=155b93;t=57045983ac51e;x=d8
    PRIORITY=6
    _TRANSPORT=driver
    MESSAGE=Runtime journal is using 8.0M (max allowed 3.1G, trying to leave 4.0G free of 31.3G available <E2><86><92> current limit 3.1G).
    MESSAGE_ID=ec387f577b844b8fa948f33cad9a75e6
    _PID=176
    _UID=0
    _GID=0
    _COMM=systemd-journal
    _EXE=/usr/lib/syste

#type get information regd.. 
[root@wae-7-1-1-etisalat log]# journalctl -u ntp
-- No entries --
[root@wae-7-1-1-etisalat log]# journalctl -u supervisord
-- No entries --
[root@wae-7-1-1-etisalat log]# journalctl -u supervisor
-- No entries --
[root@wae-7-1-1-etisalat log]# journalctl -u sshd
-- Logs begin at Fri 2018-07-06 01:01:32 IST, end at Wed 2019-11-20 18:18:36 IST. --
Oct 17 13:17:55 wae-7-1-1-etisalat systemd[1]: Starting OpenSSH server daemon...
Oct 17 13:17:55 wae-7-1-1-etisalat sshd[1133]: Server listening on 0.0.0.0 port 22.
Oct 17 13:17:55 wae-7-1-1-etisalat sshd[1133]: Server listening on :: port 22.
Oct 17 13:17:55 wae-7-1-1-etisalat systemd[1]: Started OpenSSH server daemon.
Oct 17 13:20:42 wae-7-1-1-etisalat sshd[2841]: Accepted publickey for wae from 173.39.25.114 port 53955 ssh2: RSA SHA256:jVzwxxS/YVsNzx/cp/
Oct 17 13:24:00 wae-7-1-1-etisalat sshd[4060]: Accepted publickey for wae from 173.39.25.114 port 54021 ssh2: RSA SHA256:jVzwxxS/YVsNzx/cp/
Oct 17 14:10:47 wae-7-1-1-etisalat sshd[5395]: Accepted publickey for wae from 173.39.25.114 port 54817 ssh2: RSA SHA256:jVzwxxS/YVsNzx/cp/
Oct 17 16:51:37 wae-7-1-1-etisalat sshd[8495]: Accepted publickey for wae from 10.65.35.138 port 59104 ssh2: RSA SHA256:jVzwxxS/YVsNzx/cp/i
Oct 17 17:03:34 wae-7-1-1-etisalat sshd[8740]: Accepted publickey for wae from 10.65.35.138 port 59509 ssh2: RSA SHA256:jVzwxxS/YVsNzx/cp/i
Oct 17 17:03:40 wae-7-1-1-etisalat sshd[8805]: Accepted publickey for wae from 10.65.35.138 port 59511 ssh2: RSA SHA256:jVzwxxS/YVsNzx/cp/i
Oct 17 17:06:07 wae-7-1-1-etisalat sshd[8886]: Accepted pu


#on rebooting system..=> journalctl => gets freshly born..

#Youtube(3)
https://www.youtube.com/watch?v=WnODm4_nc00

#process of booting system...
#so imp => we can troubleshoot process individually -> if issue with boot we can use => rescue desk, issue with boot loader fix issue by grub command
#Bootdevice -> Boot loader(grub) -> kernel -> initrd -> init(systemd)

vim /boot/grub2/grub.cfg

[root@wae-7-1-1-etisalat systemd]# cat /etc/default/grub
GRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=centos_wae-7-1-1-etisalat/root rd.lvm.lv=centos_wae-7-1-1-etisalat/swap rhgb quiet"
GRUB_DISABLE_RECOVERY="true"
[root@wae-7-1-1-etisalat systemd]#

[root@wae-7-1-1-etisalat systemd]# man -k lsblk
man: can't set the locale; make sure $LC_* and $LANG are correct'
lsblk (8)            - list block devices
[root@wae-7-1-1-etisalat systemd]#

#KERNEL information =>

[root@wae-7-1-1-etisalat systemd]# uname -a
Linux wae-7-1-1-etisalat 3.10.0-862.9.1.el7.x86_64 #1 SMP Mon Jul 16 16:29:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
[root@wae-7-1-1-etisalat systemd]#

[root@wae-7-1-1-etisalat systemd]# uname -v
#1 SMP Mon Jul 16 16:29:36 UTC 2018
[root@wae-7-1-1-etisalat systemd]# uname -r
3.10.0-862.9.1.el7.x86_64
[root@wae-7-1-1-etisalat systemd]#

#IP Address

[root@wae-7-1-1-etisalat systemd]# ip addr show
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:50:56:81:51:62 brd ff:ff:ff:ff:ff:ff
    inet 10.105.217.74/24 brd 10.105.217.255 scope global noprefixroute ens160
       valid_lft forever preferred_lft forever
    inet6 fe80::ad2a:f1c8:2c0a:f891/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
3: virbr0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default qlen 1000
    link/ether 52:54:00:c3:38:aa brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0
       valid_lft forever preferred_lft forever
4: virbr0-nic: <BROADCAST,MULTICAST> mtu 1500 qdisc pfifo_fast master virbr0 state DOWN group default qlen 1000
    link/ether 52:54:00:c3:38:aa brd ff:ff:ff:ff:ff:ff
17: tap0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN group default qlen 100
    link/ether 2e:d3:a8:f8:e1:8d brd ff:ff:ff:ff:ff:ff
    inet 172.21.41.20/24 brd 172.21.41.255 scope global tap0
       valid_lft forever preferred_lft forever
    inet6 fe80::2cd3:a8ff:fef8:e18d/64 scope link
       valid_lft forever preferred_lft forever
[root@wae-7-1-1-etisalat systemd]#

#Free disk space => df -ah (disk free all human readable format)
#mapped => /dev/mapper/centos_wae--7--1--1--etisalat-root   50G   47G  3.2G  94% / to root and it is 94% utilized..
[root@wae-7-1-1-etisalat systemd]# df -ah
Filesystem                                      Size  Used Avail Use% Mounted on
rootfs                                             -     -     -    - /
sysfs                                              0     0     0    - /sys
proc                                               0     0     0    - /proc
/dev/mapper/centos_wae--7--1--1--etisalat-root   50G   47G  3.2G  94% /
systemd-1                                          -     -     -    - /proc/sys/fs/binfmt_misc
mqueue                                             0     0     0    - /dev/mqueue
hugetlbfs                                          0     0     0    - /dev/hugepages

#Manage services on a system.

#service <httpd> start/stop
#systemctl start/stop <httpd> (New version of linux)

#How do you check the size of directory contents in a disk => disk usage of directory..
[root@wae-7-1-1-etisalat opt]# du -sh /opt/
30G	/opt/
[root@wae-7-1-1-etisalat opt]#

#How do you check for open ports on a linux machine.. ?/services that are listening on tcp/udp ports or sockets? => netstat

[root@wae-7-1-1-etisalat opt]# man -k netstat
man: can't set the locale; make sure $LC_* and $LANG are correct'
netstat (8)          - Print network connections, routing tables, interface statistics, masquerade connections, and multicast memberships
[root@wae-7-1-1-etisalat opt]#

netstat -antlup
         tulpn

[root@wae-7-1-1-etisalat opt]# netstat -tulpn
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:8443            0.0.0.0:*               LISTEN      31070/ncs.smp
tcp        0      0 127.0.0.1:36355         0.0.0.0:*               LISTEN      6613/designapid
tcp        0      0 0.0.0.0:2022            0.0.0.0:*               LISTEN      31070/ncs.smp
tcp        0      0 0.0.0.0:2024            0.0.0.0:*               LISTEN      31070/ncs.smp

#How do you check CPU usage of a process ?

[root@wae-7-1-1-etisalat opt]# ps aux | grep ncs.smp
root     25414  0.0  0.0 112676   988 pts/2    S+   19:10   0:00 grep --color=auto ncs.smp
wae      31070  0.2  0.6 2566360 425960 ?      Sl   Nov01  63:42 /opt/wae713/lib/ext/nso/lib/ncs/erts/bin/ncs.smp -K true -B -P 4000000 -- -root /opt/wae713/lib/ext/nso/lib/ncs -progname ncs -- -home /home/wae -- -smp auto -pa /opt/wae713/lib/ext/nso/lib/ncs/patches -boot ncs -ncs true -noshell -noinput -foreground -stacktrace_depth 24 -shutdown_time 30000 -conffile /opt/wae713_run/wae.conf -max_fds 1000000
[root@wae-7-1-1-etisalat opt]#

[root@wae-7-1-1-etisalat opt]# top | grep ncs.smp
31070 wae       20   0 2567536 427140  19156 S   0.7  0.6  63:42.70 ncs.smp
31070 wae       20   0 2566360 426544  19156 S   0.7  0.6  63:42.72 ncs.smp
31070 wae       20   0 2567716 427320  19156 S   1.0  0.6  63:42.75 ncs.smp

#Dealing with mounts
to mount a new volume..

mount /dev/sda2 /mnt

#check for mounts
[root@wae-7-1-1-etisalat opt]# mount
sysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)
proc on /proc type proc (rw,nosuid,nodev,noexec,relatime)
devtmpfs on /dev type devtmpfs (rw,nosuid,size=32886264k,nr_inodes=8221566,mode=755)
securityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)
tmpfs on /dev/shm type tmpfs (rw,nosuid,nodev)
devpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)
tmpfs on /run type tmpfs (rw,nosuid,nodev,mode=755)
tmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,mode=755)
cgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)
pstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,rela

#You want to mount a file at boot..you can check for..
[root@wae-7-1-1-etisalat opt]# cat /etc/fstab | more

#
# /etc/fstab
# Created by anaconda on Sat Sep  8 00:16:16 2018
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/centos_wae--7--1--1--etisalat-root /                       xfs     defaults        0 0
UUID=a6e5d21a-5594-414a-bcf8-c82dd16afd66 /boot                   xfs     defaults        0 0
/dev/mapper/centos_wae--7--1--1--etisalat-home /home                   xfs     defaults        0 0
/dev/mapper/centos_wae--7--1--1--etisalat-swap swap                    swap    defaults        0 0
[root@wae-7-1-1-etisalat opt]#

#how do you look up something u dont know..
#man <command>


#ENVIRONMENT Variables
=> Set of defined rules and values to build an environment
=> To view all environment variables => printenv or env
#in linux => when user logs in that user is given an environment => hey ur home dir is this, your process id is this.., these are shellpaths(script rinning)
#and few rules...

[root@wae-7-1-1-etisalat ~]# printenv
XDG_SESSION_ID=200
HOSTNAME=wae-7-1-1-etisalat
TERM=xterm-256color
SHELL=/bin/bash
HISTSIZE=1000
SSH_CLIENT=10.65.65.45 50928 22
QTDIR=/usr/lib64/qt-3.3
QTINC=/usr/lib64/qt-3.3/include
SSH_TTY=/dev/pts/5
QT_GRAPHICSSYSTEM_CHECKED=1
USER=root
LS_COLORS=rs=0:di=38;5;27:ln=38;5;51:mh=44;38;5;15:pi=40;38;5;11:so=38;5;13:do=38;5;5:bd=48;5;232;38;5;11:cd=48;5;232;38;5;3:or=48;5;232;38;5;9:mi=05;48;5;232;38;5;15:su=48;5;196;38;5;15:sg=48;5;11;38;5;16:ca=48;5;196;38;5;226:tw=48;5;10;38;5;16:ow=48;5;10;38;5;21:st=48;5;21;38;5;15:ex=38;5;34:*.tar=38;5;9:*.tgz=38;5;9:*.arc=38;5;9:*.arj=38;5;9:*.taz=38;5;9:*.lha=38;5;9:*.lz4=38;5;9:*.lzh=38;5;9:*.lzma=38;5;9:*.tlz=38;5;9:*.txz=38;5;9:*.tzo=38;5;9:*.t7z=38;5;9:*.zip=38;5;9:*.z=38;5;9:*.Z=38;5;9:*.dz=38;5;9:*.gz=38;5;9:*.lrz=38;5;9:*.lz=38;5;9:*.lzo=38;5;9:*.xz=38;5;9:*.bz2=38;5;9:*.bz=38;5;9:*.tbz=38;5;9:*.tbz2=38;5;9:*.tz=38;5;9:*.deb=38;5;9:*.rpm=38;5;9:*.jar=38;5;9:*.war=38;5;9:*.ear=38;5;9:*.sar=38;5;9:*.rar=38;5;9:*.alz=38;5;9:*.ace=38;5;9:*.zoo=38;5;9:*.cpio=38;5;9:*.7z=38;5;9:*.rz=38;5;9:*.cab=38;5;9:*.jpg=38;5;13:*.jpeg=38;5;13:*.gif=38;5;13:*.bmp=38;5;13:*.pbm=38;5;13:*.pgm=38;5;13:*.ppm=38;5;13:*.tga=38;5;13:*.xbm=38;5;13:*.xpm=38;5;13:*.tif=38;5;13:*.tiff=38;5;13:*.png=38;5;13:*.svg=38;5;13:*.svgz=38;5;13:*.mng=38;5;13:*.pcx=38;5;13:*.mov=38;5;13:*.mpg=38;5;13:*.mpeg=38;5;13:*.m2v=38;5;13:*.mkv=38;5;13:*.webm=38;5;13:*.ogm=38;5;13:*.mp4=38;5;13:*.m4v=38;5;13:*.mp4v=38;5;13:*.vob=38;5;13:*.qt=38;5;13:*.nuv=38;5;13:*.wmv=38;5;13:*.asf=38;5;13:*.rm=38;5;13:*.rmvb=38;5;13:*.flc=38;5;13:*.avi=38;5;13:*.fli=38;5;13:*.flv=38;5;13:*.gl=38;5;13:*.dl=38;5;13:*.xcf=38;5;13:*.xwd=38;5;13:*.yuv=38;5;13:*.cgm=38;5;13:*.emf=38;5;13:*.axv=38;5;13:*.anx=38;5;13:*.ogv=38;5;13:*.ogx=38;5;13:*.aac=38;5;45:*.au=38;5;45:*.flac=38;5;45:*.mid=38;5;45:*.midi=38;5;45:*.mka=38;5;45:*.mp3=38;5;45:*.mpc=38;5;45:*.ogg=38;5;45:*.ra=38;5;45:*.wav=38;5;45:*.axa=38;5;45:*.oga=38;5;45:*.spx=38;5;45:*.xspf=38;5;45:
MAIL=/var/spool/mail/root
PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
PWD=/root
LANG=en_US.UTF-8
KDEDIRS=/usr
HISTCONTROL=ignoredups
SHLVL=1
HOME=/root
LOGNAME=root
QTLIB=/usr/lib64/qt-3.3/lib
XDG_DATA_DIRS=/root/.local/share/flatpak/exports/share/:/var/lib/flatpak/exports/share/:/usr/local/share/:/usr/share/
SSH_CONNECTION=10.65.65.45 50928 10.105.217.74 22
LC_CTYPE=UTF-8
LESSOPEN=||/usr/bin/lesspipe.sh %s
XDG_RUNTIME_DIR=/run/user/0
QT_PLUGIN_PATH=/usr/lib64/kde4/plugins:/usr/lib/kde4/plugins
_=/usr/bin/printenv
[root@wae-7-1-1-etisalat ~]#

=> To view only one environment variables =>echo $SHELL

[root@wae-7-1-1-etisalat ~]# echo $SHELL
/bin/bash
[root@wae-7-1-1-etisalat ~]# echo $PATH
/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
[root@wae-7-1-1-etisalat ~]#

=> To set environment variables - you can 
export TEST=1
echo $TEST

[root@wae-7-1-1-etisalat ~]# export TEST=1
[root@wae-7-1-1-etisalat ~]# echo $TEST
1
[root@wae-7-1-1-etisalat ~]#

=> To set environment variable permenantly  
vi ~/.bashrc
TEST='123'
export TEST

=> To set environment globally and u want to have it permenantly  (For every user who logs in to the system! :) :) )
vi /etc/bashrc or /etc/profile
TEST='123'
export TEST

#When ever we run some command in operating system.. OS will go and search that command in PATH.. if not present.. it cannot run command
[root@wae-7-1-1-etisalat ~]# echo $PATH
/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
[root@wae-7-1-1-etisalat ~]#


EVERY time we login.. OS will read .bashrc file..

##LINUX FILE SYSTEM

flie-system => closet/shelf => you put t-shirt in one self, phant in order shelf..
CLOSET SYSTEM => Operating system

commands => /usr/bin
Attached devices => /dev
Applications => /etc , /var

######
/boot => contains the file that is used by boot loader(grub.cfg) => when operating system boots up it lloks for /boot=>hardoceded..
/root => root user home directory, it is not same as /
/dev => system devices(e.g disk, cdrom,speakers, keyboard,flashdrive etc.)
/etc => configuration files..(sendmail, nfs, ntp or any kind of any application runs on linux system..or comes with linux system)
		#change dns => vi /etc/name.conf (Take backup..)
/bin => /usr/bin => Everyday user command
/sbin => /usr/sbin => system/filesystem commands(only need for system type of purposes)
/opt => optional add-on applications(Not part of OS apps)
/proc => is directory that is used to create files for all running processes(only exist in memory)
/lib => /usr/lib => C Programming library files needed by commands and apps
	#strace -e open pwd
/tmp => Directory for temporary files (if you think u will delete some files..you can use it..)
/home => Directory of User
/var => System Logs(OS writing something will go here..application log etc.)
/run => System daemons that start very early(e.g systemd and udev) to store temporary runtimefiles like PID files
/mnt => to mount external file system (e.g NFS)
/media => for CDROM mounts..

######

/etc/sysconfig/iptables
-A INPUT -s 66.115.173.146 -j DROP
-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 3888 -j ACCEPT

#Do /var/log(90) #nohup 

###LOG Monitor..

#similar to how doctors keep logs on your physical health.. similarly systems also keep and generate...
#Most type of log files are present in /var/log.. unless specified or changed..to change log location..

Log Directory => /var/log
boot, => boots up
chronyd => ntp
cron =>
maillog
secure
messages -> monitor system activites(HDD, APLication wise, process wise,(everthying to do with systems..))
httpd => apache application log

ll => shows in alphabetic order..

drwx(local)rwx(group)rwx(others)
